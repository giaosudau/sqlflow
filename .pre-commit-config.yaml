repos:
# Fast formatting and linting - these can run in parallel
-   repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.11.12
    hooks:
    -   id: ruff
        name: ruff-lint
        args: ['--fix', '--select', 'I', '--exit-non-zero-on-fix']
    -   id: ruff-format
        name: ruff-format

# Local hooks for project-specific tasks
-   repo: local
    hooks:
    -   id: pytest
        name: pytest
        entry: pytest
        language: python
        files: '^(.*\.py|tests/.*|setup\.py|setup\.cfg|pyproject\.toml|requirements.*\.txt)$'
        types: [python]
        args: [
            '-q',
            '--disable-warnings',
            '-n', 'auto',
            '--dist', 'worksteal',
            '--maxfail=3'
        ]
        pass_filenames: false
        require_serial: true

    -   id: examples-demo-scripts
        name: Run example demo scripts
        entry: ./run_all_examples.sh
        language: system
        pass_filenames: false
        files: '^examples/.*\.(sf|py|csv|yml|yaml|sh)$'
        require_serial: true
        verbose: true
